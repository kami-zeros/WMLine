!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={random:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t+(arguments[1]-t)*Math.random()},extend:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.forEach(function(e){for(var i in e)t[i]=e[i]}),t},isPhone:function(){return!!/phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent)},transTime:function(t,e){return+t/1e3*60|0||e}};e.default=r},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(6),o=r(n),s=i(0),a=r(s),u=a.default.isPhone()?document.body.clientWidth:400,l=a.default.isPhone()?document.body.clientHeight:650,h=function(){return{width:u,height:l,canvases:["fall","bg","firework"],snowInterval:60,heartInterval:15,snow:{x:void 0,y:void 0,minSize:5,maxSize:10,size:void 0,speed:.5,opacity:.8},heart:{x:void 0,y:void 0,minSize:15,maxSize:20,size:void 0,speed:1},fallType:"snow",sunset:1e3,fireworkInterval:[60,240],fireworks:{x:void 0,y:l,xEnd:void 0,yEnd:void 0,size:2,radius:[1,2],velocity:3,opacity:.8,count:[150,250],wait:void 0,color:void 0},skyColor:"hsla({hue}, 60%, {lightness}%, 0.2)",fireOpt:{wordInterval:3e3}}}();h.sunset=a.default.transTime(h.sunset,600),h.fireOpt.denseTime=a.default.transTime(h.fireOpt.denseTime,600),(0,o.default)(h.width,h.height,h.canvases),e.default=h},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=i(1),l=(r(u),i(0)),h=r(l),f=i(3),c=r(f),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.x,r=t.y,s=t.minSize,a=void 0===s?5:s,u=t.maxSize,l=void 0===u?7.5:u,f=t.size,c=t.speed,d=void 0===c?.5:c,y=t.opacity,p=void 0===y?.8:y;n(this,e);var v=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:i,y:r,minSize:a,maxSize:l,size:f}));return v.opacity=h.default.random(p,1),v.speed=d*(1+Math.random()),v.direction=Math.random()>.5?.5:-.5,v}return s(e,t),a(e,[{key:"fall",value:function(){this.x+=Math.random()*this.direction,this.y+=this.speed}},{key:"render",value:function(t){return this.fall(),!this.outOfBounds()&&(this.g=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size),this.g.addColorStop(0,"hsla(255,255%,255%,"+this.opacity+")"),this.g.addColorStop(1,"hsla(255,255%,255%,0)"),t.beginPath(),t.fillStyle=this.g,t.arc(this.x,this.y,this.size,0,2*Math.PI,!1),t.fill(),!0)}}]),e}(c.default);e.default=d},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),a=r(s),u=i(0),l=r(u),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.x,r=e.y,o=e.minSize,s=void 0===o?5:o,u=e.maxSize,h=void 0===u?7.5:u,f=e.size,c=e.opacity,d=void 0===c?1:c;n(this,t),this.size=f||l.default.random(s,h),this.x=i||l.default.random(0,a.default.width-this.size),this.y=r||-this.size,this.opacity=d}return o(t,[{key:"outOfBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.height,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.width;return!(this.x>=-this.size&&this.x<=e&&this.y<=t&&this.y>=-this.size)}}]),t}();e.default=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(3),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){function e(t){var i=t.x,o=t.y,s=t.size,a=void 0===s?1.5:s,u=t.radius;r(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:i,y:o,size:a}));return l.rate=Math.random(),l.angle=2*Math.PI*Math.random(),l.vx=u*Math.cos(l.angle)*l.rate,l.vy=u*Math.sin(l.angle)*l.rate,l}return o(e,t),s(e,[{key:"go",value:function(){this.x+=this.vx,this.y+=this.vy,this.vy+=.02,this.vx*=.98,this.vy*=.98}},{key:"render",value:function(t){this.go(),t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI,!1),t.fill()}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(1),u=r(a),l=i(0),h=r(l),f=i(7),c=r(f),d=i(11),y=r(d),p=i(2),v=r(p),w=i(12),b=r(w),m=i(13),g=r(m);!function(){new(function(){function t(){var e=this;o(this,t),this.initProperty(),this.initAudio(),y.default.load(c.default).then(function(t){document.querySelector("#loading").style.display="none",e.imgs=e.dealImgs(t),e.init()}).catch(function(t){console.log(t)})}return s(t,[{key:"initAudio",value:function(){var t=new Audio;t.src=i(15),t.loop=!0,t.volume=.5;var e=document.querySelector("#music");t.play(),document.addEventListener("WeixinJSBridgeReady",function(){t.play()},!1),e.onclick=function(){"on"==this.getAttribute("class")?(this.setAttribute("class","off"),t.pause()):(this.setAttribute("class","on"),t.play())}}},{key:"initProperty",value:function(){var t=this;this.height=u.default.height,this.width=u.default.width,u.default.canvases.forEach(function(e){t[e+"Ctx"]=document.querySelector("#"+e).getContext("2d")}),this.fallDots=[],this.fallType=u.default.fallType,this.time=0,this.status=1,this.sunsetTime=u.default.sunset,this.skyColor={hue:210,lightness:0},this.fireworks=[],this.fireworkTime=0|h.default.random.apply(h.default,n(u.default.fireworkInterval)),this.fireOpt=h.default.extend({end:!1,time:600,showWords:!1},u.default.fireOpt)}},{key:"go",value:function(t){switch(t){case 1:++this.status;break;case 2:this.sunsetTime=null,++this.status;break;case 3:this.fireOpt=null,++this.status;break;case 4:++this.status}}},{key:"init",value:function(){this.drawBg(this.bgCtx,this.imgs.bg),this.loop()}},{key:"loop",value:function(){switch(requestAnimationFrame(this.loop.bind(this)),++this.time>=6e4||this.time,this.renderFall(),this.status){case 1:this.renderDialogue();break;case 2:this.sunset();break;case 3:this.controlFire(),this.renderFireworks();break;case 4:this.renderTitle(),this.renderFireworks();break;case 5:this.end(),this.renderFireworks()}}},{key:"renderDialogue",value:function(){return this.go(1)}},{key:"renderTitle",value:function(){this.fallType="mix",this.go(4)}},{key:"renderFall",value:function(){switch(this.fallCtx.clearRect(0,0,this.width,this.height),this.fallType){case"snow":this.time%u.default.snowInterval==0&&this.fallDots.push(new v.default(u.default.snow));break;case"heart":this.time%u.default.heartInterval==0&&this.fallDots.push(new b.default(u.default.heart));break;case"mix":this.time%u.default.snowInterval==0&&this.fallDots.push(new v.default(u.default.snow)),this.time%u.default.heartInterval==0&&this.fallDots.push(new b.default(u.default.heart))}for(var t=this.fallDots.length-1;t>=0;--t)!this.fallDots[t].render(this.fallCtx)&&this.fallDots.splice(t,1)}},{key:"sunset",value:function(){if(--this.sunsetTime<=0)return this.go(2);this.fireworkCtx.fillStyle="hsla(210, 60%, 5%, "+.01*(20-this.sunsetTime/u.default.sunset*20)+")",this.fireworkCtx.fillRect(0,0,u.default.width,u.default.height)}},{key:"controlFire",value:function(){--this.fireOpt.time,console.log(this.fireOpt.time),0==this.fireOpt.time&&this.createDenseFire(),-60==this.fireOpt.time&&this.fireOpt.end&&this.fireworks.push(new g.default({x:u.default.width/2,yEnd:u.default.height/8,count:600,radius:5})),this.fireOpt.time<=-180&&!this.fireOpt.end&&this.showFireworkWords(),-360==this.fireOpt.time&&this.fireOpt.end&&this.go(3)}},{key:"showFireworkWords",value:function(){this.fireOpt.end=!0,this.fireOpt.time=180,--this.fireOpt.wordInterval<=0&&(this.fireOpt.wordInterval=u.default.fireOpt.wordInterval)}},{key:"createDenseFire",value:function(){for(var t=this,e=0;e<10;e++)setTimeout(function(){t.fireworks.push(new g.default(u.default.fireworks))},100*e)}},{key:"renderFireworks",value:function(){this.fireworkCtx.fillStyle=u.default.skyColor.replace("{lightness}",5+15*this.skyColor.lightness).replace("{hue}",this.skyColor.hue),this.fireworkCtx.fillRect(0,0,this.width,this.height),this.createFireworks(),this.skyColor={lightness:0,hue:210};for(var t=this.fireworks.length-1;t>=0;--t)this.skyColor=this.skyColor.lightness>=this.fireworks[t].getSkyColor().lightness?this.skyColor:this.fireworks[t].getSkyColor(),!this.fireworks[t].render(this.fireworkCtx)&&this.fireworks.splice(t,1)}},{key:"createFireworks",value:function(){--this.fireworkTime<=0&&(this.fireworks.push(new g.default(u.default.fireworks)),this.fireworkTime=0|h.default.random.apply(h.default,n(u.default.fireworkInterval)))}},{key:"end",value:function(){this.fallType="mix",this.time%600==0&&this.createDenseFire()}},{key:"drawBg",value:function(t,e){var i=e.width,r=e.height,n=i/r,o=this.width/this.height,s=void 0,a=void 0,u=void 0,l=void 0;n>=o?(a=0,l=r,s=(n-o)*i/2,u=r*o):n<o&&(s=0,u=i,a=(r-i/o)/2,l=i/o),t.drawImage(e,s,a,u,l,0,0,this.width,this.height)}},{key:"dealImgs",value:function(t){var e={};return t.forEach(function(t){e[t.key]=t.img}),e}}]),t}())}()},function(t,e,i){"use strict";function r(t,e,i){if(o.default.isPhone){var r=document.querySelectorAll("body")[0];r.style.width=t+"px",r.style.height=e+"px"}i.forEach(function(i){var r=document.querySelector("#"+i);r.setAttribute("width",t),r.setAttribute("height",e)})}Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={bg:i(8),musicon:i(9),musicoff:i(10)};e.default=r},function(t,e,i){t.exports=i.p+"img/bg2.jpg"},function(t,e,i){t.exports=i.p+"img/musicon.png"},function(t,e,i){t.exports=i.p+"img/musicoff.png"},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t)}return n(t,null,[{key:"loadImg",value:function(t,e){return new Promise(function(i,r){var n=new Image;n.onload=function(){i({key:e,img:n})},n.onerror=r,n.src=t})}},{key:"load",value:function(t){var e=[];for(var i in t)e.push(this.loadImg(t[i],i));return Promise.all(e)}}]),t}();e.default=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(2),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=Math.random,h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.x,o=void 0===i?0:i,s=t.y,a=void 0===s?0:s,u=t.minSize,h=void 0===u?15:u,f=t.maxSize,c=void 0===f?20:f,d=t.size,y=t.speed,p=void 0===y?1:y;r(this,e);var v=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{minSize:h,maxSize:c,x:o,y:a,size:d,speed:p}));return v.color="hsla("+360*l()+", 90%, 65%, 1)",v}return o(e,t),s(e,[{key:"render",value:function(t){return this.fall(),!this.outOfBounds()&&(t.save(),t.beginPath(),t.fillStyle=this.color,t.moveTo(this.x+.5*this.size,this.y+.3*this.size),t.bezierCurveTo(this.x+.1*this.size,this.y,this.x,this.y+.6*this.size,this.x+.5*this.size,this.y+.9*this.size),t.bezierCurveTo(this.x+1*this.size,this.y+.6*this.size,this.x+.9*this.size,this.y,this.x+.5*this.size,this.y+.3*this.size),t.closePath(),t.fill(),t.restore(),!0)}}]),e}(u.default);e.default=h},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(1),u=r(a),l=i(0),h=r(l),f=i(4),c=r(f),d=i(14),y=r(d),p=.002,v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.x,r=e.y,s=void 0===r?u.default.height:r,a=e.xEnd,l=e.yEnd,f=e.size,c=void 0===f?2:f,d=e.radius,v=void 0===d?[1.2,1.2]:d,w=e.velocity,b=void 0===w?3:w,m=e.opacity,g=void 0===m?.8:m,k=e.count,x=void 0===k?[200,250]:k,O=e.wait,_=e.color,P=e.dots,z=e.prtOption,S=void 0===z?{}:z;if(o(this,t),this.x=i||h.default.random(u.default.width/8,7*u.default.width/8),this.y=s,this.xEnd=a||this.x,this.yEnd=l||h.default.random(u.default.height/8,3*u.default.height/8),this.size=c,this.opacity=g,this.velocity=-Math.abs(b),this.wait=O||h.default.random(30,60),this.radius=h.default.random.apply(h.default,n(v)),this.GRAVITY=p,this.hue=360*Math.random()|0,this.color=_||"hsla("+this.hue+",80%,60%,1)",this.status=1,P){this.type="words";var M={xStart:this.xEnd,yStart:this.yEnd};this.particles=P.map(function(t){return new y.default(h.default.extend({},t,M,S))})}else this.count=0|h.default.random.apply(h.default,n(x)),this.particles=[],this.createParticles(),this.type="normal"}return s(t,[{key:"createParticles",value:function(){for(var t=0;t<this.count;++t)this.particles.push(new c.default({x:this.xEnd,y:this.yEnd,radius:this.radius}))}},{key:"getSkyColor",value:function(){return{lightness:3==this.status?this.opacity:0,hue:this.hue}}},{key:"render",value:function(t){switch(this.status){case 1:return t.save(),t.beginPath(),t.globalCompositeOperation="lighter",t.globalAlpha=this.opacity,t.translate(this.x,this.y),t.scale(.8,2.3),t.translate(-this.x,-this.y),t.fillStyle=this.color,t.arc(this.x+Math.sin(2*Math.PI*Math.random())/1.2,this.y,this.size,0,2*Math.PI,!1),t.fill(),t.restore(),this.rise(),!0;case 2:return--this.wait<=0&&(this.opacity=1,this.status=3),!0;case 3:t.save(),t.globalCompositeOperation="lighter",t.globalAlpha=this.opacity,t.fillStyle=this.color;for(var e=0;e<this.particles.length;++e)this.particles[e].render(t);return t.restore(),this.opacity-=.01,this.opacity>0}}},{key:"rise",value:function(){this.y+=1*this.velocity,this.velocity+=this.GRAVITY,this.y-this.yEnd<=50&&(this.opacity=(this.y-this.yEnd)/50),this.y<=this.yEnd&&(this.status=2)}}]),t}();e.default=v},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(4),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){function e(t){var i=t.x,o=t.y,s=t.size,a=void 0===s?1:s,u=t.circle,l=void 0===u?1:u,h=t.xStart,f=t.yStart;r(this,e);var c=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:i,y:o,size:a,circle:l}));return c.dx=(i-h)/80,c.dy=(o-f)/80,c.xStart=h,c.yStart=f,c}return o(e,t),s(e,[{key:"go",value:function(){this.xStart+=this.dx,this.yStart+=this.dy}},{key:"render",value:function(t){this.go(),t.beginPath(),t.arc(this.xStart,this.yStart,this.size,0,2*Math.PI,!1),t.fill()}}]),e}(u.default);e.default=l},function(t,e,i){t.exports=i.p+"1.mp3"}]);